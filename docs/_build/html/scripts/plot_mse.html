

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>plot_mse &mdash; Process and Plot Scripts 1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/collapsible-lists/js/CollapsibleLists.compressed.js"></script>
        <script src="../_static/collapsible-lists/js/apply-collapsible-lists.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/collapsible-lists/css/tree_view.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="segment_identifier" href="segment_identifier.html" />
    <link rel="prev" title="parameters" href="parameters.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: white" >
          

          
            <a href="../index.html" class="icon icon-home"> Process and Plot Scripts
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Python Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="executing.html">Executing Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="convert_to_met3d.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">convert_to_met3d</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="create_median.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">create_median</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="dask_loader.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">dask_loader</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="latexify.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">latexify</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="merge.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">merge</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="parameters.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">parameters</span></code></a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#"><code class="xref py py-mod docutils literal notranslate"><span class="pre">plot_mse</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="segment_identifier.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">segment_identifier</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="segment_statistics.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">segment_statistics</span></code></a></li>
</ul>
<p class="caption"><span class="caption-text">Grouped C++ Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../groups/rk.html">Runge-Kutta 4</a></li>
<li class="toctree-l1"><a class="reference internal" href="../groups/ufunc.html">User Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../groups/io.html">Input/Output Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../groups/parametrizations.html">Physical Parametrizations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../groups/types.html">Custom Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../groups/general.html">General Functions</a></li>
</ul>
<p class="caption"><span class="caption-text">Example Results</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../results/traj0.html">Example Results for a Single Trajectory</a></li>
</ul>
<p class="caption"><span class="caption-text">Full C++ Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api/library_root.html">C++ API</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Process and Plot Scripts</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li><code class="xref py py-mod docutils literal notranslate"><span class="pre">plot_mse</span></code></li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/scripts/plot_mse.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="plot-mse">
<h1><code class="xref py py-mod docutils literal notranslate"><span class="pre">plot_mse</span></code><a class="headerlink" href="#plot-mse" title="Permalink to this headline">¶</a></h1>
<p>Used to get statistics on different errors over ensemble results and predicted errors.
You can run <cite>python plot_mse.py –help</cite> to get an overview of the
usage of this script.</p>
<span class="target" id="module-scripts.plot_mse"></span><dl class="py function">
<dt id="scripts.plot_mse.plot_mse">
<code class="sig-prename descclassname">scripts.plot_mse.</code><code class="sig-name descname">plot_mse</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">df</span></em>, <em class="sig-param"><span class="n">out_params</span></em>, <em class="sig-param"><span class="n">store_path</span><span class="o">=</span><span class="default_value">'pics/correlation'</span></em>, <em class="sig-param"><span class="n">backend</span><span class="o">=</span><span class="default_value">'bokeh'</span></em>, <em class="sig-param"><span class="n">plot_types</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">add_zero_sens</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">confidence</span><span class="o">=</span><span class="default_value">0.9</span></em>, <em class="sig-param"><span class="n">title</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">xlabel</span><span class="o">=</span><span class="default_value">'Sensitivity'</span></em>, <em class="sig-param"><span class="n">ylabel</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">width</span><span class="o">=</span><span class="default_value">900</span></em>, <em class="sig-param"><span class="n">height</span><span class="o">=</span><span class="default_value">900</span></em><span class="sig-paren">)</span><a class="headerlink" href="#scripts.plot_mse.plot_mse" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the dataframe which should hold parameters with their sensitivity
to one model state parameter and the actual deviation when perturbing
on a log-log plot.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.Dataframe</em>) – A dataframe with columns “Output Parameter” for the model state
variables, which must have only one value,
“Input Parameter” for the perturbed model parameter,
“Predicted Squared Error” for the sensitivity calculated to deviations
in the next timestep, “Mean Squared Error” for the actual deviations</p></li>
<li><p><strong>out_params</strong> (<em>list of string</em>) – <em>Should</em> be only a list of a single value, namely the output parameter
in the given dataframe.</p></li>
<li><p><strong>store_path</strong> (<em>string</em>) – Path to folder where to store the images.</p></li>
<li><p><strong>backend</strong> (<em>string</em>) – Either “matplotlib” or “bokeh” for plotting.</p></li>
<li><p><strong>plot_types</strong> (<em>bool</em>) – Wether to plot the errors grouped by the type of the model parameters.</p></li>
<li><p><strong>add_zero_sens</strong> (<em>bool</em>) – Add sensitivities of value zero to the far left and mark it with
negative infinity.</p></li>
<li><p><strong>confidence</strong> (<em>float</em><em> or </em><em>None</em>) – Plot a confidence ellipse around each sample with confidence
between 0 and 1. If none is given, no ellipse will be plotted.</p></li>
<li><p><strong>title</strong> (<em>string</em>) – Title for the plot.</p></li>
<li><p><strong>xlabel</strong> (<em>string</em>) – Alternative label for x-axis.</p></li>
<li><p><strong>ylabel</strong> (<em>string</em>) – Alternative label for y-axis.</p></li>
<li><p><strong>width</strong> (<em>int</em>) – Width of plot in pixels.</p></li>
<li><p><strong>height</strong> (<em>int</em>) – Height of plot in pixels.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="scripts.plot_mse.plot_time_evolution">
<code class="sig-prename descclassname">scripts.plot_mse.</code><code class="sig-name descname">plot_time_evolution</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">df</span></em>, <em class="sig-param"><span class="n">store_path</span><span class="o">=</span><span class="default_value">'../pics/time_evo'</span></em>, <em class="sig-param"><span class="n">backend</span><span class="o">=</span><span class="default_value">'matplotlib'</span></em>, <em class="sig-param"><span class="n">title</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">xlabel</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">ylabel</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">twinlabel</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">min_x</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">max_x</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">plot_deviation</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">perturb_delta</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">alpha</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">width</span><span class="o">=</span><span class="default_value">900</span></em>, <em class="sig-param"><span class="n">height</span><span class="o">=</span><span class="default_value">900</span></em>, <em class="sig-param"><span class="n">logy</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">logtwin</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">min_time</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">max_time</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#scripts.plot_mse.plot_time_evolution" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot over time after ascent the model state (left y-axis) and
sensitivity (right y-axis).
We cut off the highest predicted value, if the difference to the second
biggest value is an order of magnitude or more,
since this can be an outlier which
makes the rest of the values hard to see.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.Dataframe</em>) – A dataframe with columns “Output Parameter” for the model state
variables, which must have only one value,
“Input Parameter” for the perturbed model parameter,
“Predicted Squared Error” for the sensitivity calculated to deviations
in the next timestep, “Mean Squared Error” for the actual deviations</p></li>
<li><p><strong>store_path</strong> (<em>string</em>) – Path to folder where to store the images.</p></li>
<li><p><strong>backend</strong> (<em>string</em>) – Either “matplotlib” or “bokeh” for plotting. Currently, only matplotlib
gives correct plots.</p></li>
<li><p><strong>title</strong> (<em>string</em>) – Title for the plot.</p></li>
<li><p><strong>xlabel</strong> (<em>string</em>) – Alternative label for x-axis.</p></li>
<li><p><strong>ylabel</strong> (<em>string</em>) – Alternative label for y-axis.</p></li>
<li><p><strong>twinlabel</strong> (<em>string</em>) – Label for twin axis.</p></li>
<li><p><strong>min_x</strong> (<em>float</em>) – Set the start time relative to the start of the ascent. In case
of plotting the deviation via perturbance it is a good idea to set
min_x to the first step when it is actually perturbed.</p></li>
<li><p><strong>max_x</strong> (<em>float</em>) – Set the last time relative to the start of the ascent.</p></li>
<li><p><strong>plot_deviation</strong> (<em>bool</em>) – If true, plot the deviation from perturbing parameters. If false,
plot the actual model state variable.</p></li>
<li><p><strong>perturb_delta</strong> (<em>float</em>) – Time difference between different ensembles where perturbing started.
This will plot vertical lines at each of those time steps.</p></li>
<li><p><strong>alpha</strong> (<em>float</em>) – Alpha value for the dots.</p></li>
<li><p><strong>width</strong> (<em>int</em>) – Width of plot in pixels.</p></li>
<li><p><strong>height</strong> (<em>int</em>) – Height of plot in pixels.</p></li>
<li><p><strong>logy</strong> (<em>bool</em>) – If true, use log10 on y-axis</p></li>
<li><p><strong>logtwin</strong> (<em>bool</em>) – If true, use log10 on twin-axis</p></li>
<li><p><strong>min_time</strong> (<em>float</em><em> or </em><em>None</em>) – If float: Plot starting with this time relative to the ascent in seconds.</p></li>
<li><p><strong>max_time</strong> (<em>float</em><em> or </em><em>None</em>) – If float: Plot ending with this time relative to the ascent in seconds.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="scripts.plot_mse.reduce_df">
<code class="sig-prename descclassname">scripts.plot_mse.</code><code class="sig-name descname">reduce_df</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">df</span></em>, <em class="sig-param"><span class="n">error_key</span></em>, <em class="sig-param"><span class="n">sens_kind</span><span class="o">=</span><span class="default_value">'mean'</span></em>, <em class="sig-param"><span class="n">error_kind</span><span class="o">=</span><span class="default_value">'mean'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#scripts.plot_mse.reduce_df" title="Permalink to this definition">¶</a></dt>
<dd><p>Given an appended dataframe, reduce the (predicted) errors such that a
single datapoint for each output parameter, perturbed parameter
and ratio type is left.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.Dataframe</em>) – </p></li>
<li><p><strong>error_key</strong> (<em>string</em>) – Name of the column for predicted errors.</p></li>
<li><p><strong>sens_kind</strong> (<em>string</em>) – How to reduce the predicted errors over all trajectories. Options are:
sum: Take the sum of all errors.
max: Take the maximum of all errors.
mean: Take the mean of all errors.</p></li>
<li><p><strong>error_kind</strong> (<em>string</em>) – How to reduce the true errors from perturbed ensembles. Options are:
sum: Take the sum of all errors.
max: Take the maximum of all errors.
mean: Take the mean of all errors.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Reduced pandas.Dataframe</p>
</dd>
</dl>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="segment_identifier.html" class="btn btn-neutral float-right" title="segment_identifier" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="parameters.html" class="btn btn-neutral float-left" title="parameters" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Maicon Hieronymus

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>